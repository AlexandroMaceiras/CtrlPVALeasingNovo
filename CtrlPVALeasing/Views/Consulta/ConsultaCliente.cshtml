@model IEnumerable<CtrlPVALeasing.Models.ContratosVeiculosViewModel>
<head>
    <meta name="viewport" content="width=device-width" />

    <!-- Este css dá conflito e faz as janelinhas de filtro do grid ficarem desalinhadas com o símbolo de filtro-->
    <!-- <link href="@Url.Content("~/Content/bootstrap.min.css")" rel="stylesheet" /> -->
    <script src="@Url.Content("~/Scripts/jquery-1.10.2.min.js")"></script>

    <!-- <script src="@Url.Content("~/Scripts/bootstrap.min.js")" type="text/javascript"> </script> -->

</head>
@{
    ViewBag.Title = "Consultar Cliente";
}

@using (Html.BeginForm("ConsultaCliente", "Consulta"))
{
    <div class="jumbotronFundo">

        <h2>CONSULTA DE CLIENTE</h2>
        <br />
        <center>
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <th class="busca" width="5%">
                        <b class="fonte-cinza-claro">CPF/CNPJ:&nbsp;&nbsp;&nbsp;</b>
                    </th>
                    <th class="busca" width="10%">
                        @{
                            //Tira os Zeros à esquerda.
                            var cpf_cnpj_cliente = "";
                            if (Request["cpf_cnpj_cliente"] != null)
                            {
                                cpf_cnpj_cliente = @Request["cpf_cnpj_cliente"].TrimStart('0');
                            }
                            <input id="limpaNaMarra" class="input-sm-fino" value="@cpf_cnpj_cliente" type="text" name="cpf_cnpj_cliente" size="40" style="text-transform:uppercase">
                        }
                    </th>
                    <th class="busca">
                    <td align="right" width="10%">
                        <div id="fazSubmit"><input class="btn2 btn-primary-pesqui .btn-sm" type="submit" name="busca" value="PESQUISAR" /></div>
                    </td>
                    <td align="right" width="9%">
                        <div id="mudaReset"><input class="btn2 btn-primary-limpar btn-sm" type="submit" name="busca" value="LIMPAR" /></div>
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    </th>
                    <th>
                        <a href="/" class="btn2 btn-primary-menu btn-sm">MENU</a>
                    </th>
                </tr>
                <tr>
                    <td>
                        <div></div>
                    </td>

                </tr>
            </table>
            <hr />
        </center>

        <center>
            <table width="100%" border="1" cellspacing="0" cellpadding="10" style="border-style:inherit">
                <tr>
                    <td>
                        <b class="fonte-cinza-escuro">DADOS DO CLIENTE:</b>
                        <table border="0" style="border-style:inherit">
                            <tr>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Nome/ Razão social:&nbsp;&nbsp;&nbsp;</div>
                                </td>
                                <td colspan="7">
                                    <input class="input-sm-fino" value="@Model.First().nome_cliente" type="text" name="contrato" maxlength="40" size="79" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">CPF/ CNPJ: </div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().cpf_cnpj_cliente" type="text" name="contrato" size="30" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                                <td>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Telefone Com.: &nbsp;&nbsp;&nbsp;</div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().fone_cliente_cml" type="text" name="cliente" size="20" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                                <td>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Telefone Particular: &nbsp;&nbsp;&nbsp;</div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().fone_cliente_particular" type="text" name="cliente" size="25" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Endereço: </div>
                                </td>
                                <td colspan="4">
                                    <input class="input-sm-fino" value="@Model.First().end_cliente" type="text" name="contrato" maxlength="40" size="79" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                                <td>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Bairro: </div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().bairro_cliente" type="text" name="contrato" size="25" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Cidade: </div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().cidade_cliente" type="text" name="contrato" size="30" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                                <td>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Estado: </div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().uf_cliente" type="text" name="contrato" size="3" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                                <td>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">CEP: </div>
                                </td>
                                <td>
                                    <input class="input-sm-fino" value="@Model.First().cep_cliente" type="text" name="contrato" size="25" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Marcas: </div>
                                </td>
                                <td colspan="7">
                                    <!--Virá do CCL_Marcas--><input class="input-sm-fino" value="" type="text" name="contrato" size="30" style="text-transform:uppercase" disabled="disabled" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="5">
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Valor de Débitos de IPVA (Cliente): &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<!--Criar a Tabela no Banco!!!!!--><input class="input-sm-fino" value="" type="text" name="contrato" size="30" style="text-transform:uppercase" disabled="disabled" /></div>
                                </td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </center>

        <br />
        <center>
            <table width="100%" border="1" cellspacing="0" cellpadding="10" style="border-style:inherit">
                <tr>
                    <td>
                        <b class="fonte-cinza-escuro">DADOS DOS CONTRATOS:</b>
                        <table border="0" style="border-style:inherit">
                            <tr>
                                <td>
                                    <div class="fonte-cinza-claro fonte-tamanho-form">Total de Contratos:&nbsp;&nbsp;&nbsp;</div>
                                </td>
                                @if (Model != null)
                                {
                                    @Html.Partial("_ContadorDeGrid")
                                }
                            </tr>
                            <tr>
                                <td class="input-sm-fino">&nbsp;</td>
                            </tr>
                            <tr>
                                @if (Model != null)
                                {
                                    @Html.Partial("_GridContratos")
                                }
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </center>

    </div>

    //Erro de contrato não encontrado
    if (Model.First().id == -1)
    {
        <script>
        try
        {
            $(document).ready(function() {
                $("#msgErro").modal();
            });
        }
        catch (e)
        {
            alert(e);
        }
        </script>
        }
    }

<script>
    //Limpa o campo contrato mesmo que ele tenha sito recuperado pelo request.
    try {
        $("#mudaReset").click(function () {
            document.getElementById("limpaNaMarra").setAttribute("value", "");
            document.getElementById("ConsultaContrato").submit();
        });
    }
    catch (e) {
        alert(e);
    }
</script>

<div class="modal fade modal-sm" role="dialog" aria-labelledby="example-modal--label" aria-hidden="true" id="msgErro" tabindex="-1">
    <div class="modal-dialog modal-sm">
        <div class="modal-content modal-sm">
            <header class="modal-header modal-sm">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Fecha Janela</span></button>
                <center><h4 class="modal-title modal-sm" id="mySmallModalLabel" style="color:rgb(7, 44, 85)"><b>CONSULTA DE CLIENTE</b></h4></center>
            </header>
            <div class="modal-body modal-sm">
                <table width="100%">
                    <tr>
                        <td><center><h4 style="color: rgb(176, 172, 186)">Cliente não encontrado!</h4></center></td>
                    </tr>
                    <tr>
                        <td align="right"><button type="button" class="btn btn-sm" data-dismiss="modal">Fechar</button></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>